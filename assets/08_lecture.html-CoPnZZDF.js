import{_ as t,c as p,a,b as n,e as s,o as l}from"./app-DHbqBNxu.js";const c={};function o(i,e){return l(),p("div",null,[...e[0]||(e[0]=[a('<h1 id="ит-03-08-добавление-обновление-и-удаление-данных-операторы-insert-update-delete" tabindex="-1"><a class="header-anchor" href="#ит-03-08-добавление-обновление-и-удаление-данных-операторы-insert-update-delete"><span>ИТ.03 - 08 - Добавление, обновление и удаление данных: операторы INSERT, UPDATE, DELETE</span></a></h1><h2 id="введение" tabindex="-1"><a class="header-anchor" href="#введение"><span>Введение</span></a></h2><p>В предыдущих темах мы извлекали и агрегировали данные (SELECT, фильтры, сортировки, группировки). Теперь переходим к модификации данных:</p><ul><li><code>INSERT</code> — добавление новых строк;</li><li><code>UPDATE</code> — изменение существующих строк;</li><li><code>DELETE</code> — удаление строк из таблицы.</li></ul><p>Эти операции называют DML (Data Manipulation Language). Они меняют состояние таблиц и по умолчанию не выводят результат на экран. Контекст выполнения — SQLite; необходимые отличия других СУБД отметим по месту (например, <code>TRUNCATE</code> в подблоке к <code>DELETE</code>).</p><h2 id="пример-таблицы-inventory" tabindex="-1"><a class="header-anchor" href="#пример-таблицы-inventory"><span>Пример таблицы <code>inventory</code></span></a></h2><table><thead><tr><th>id</th><th>sku</th><th>title</th><th>amount</th><th>price</th><th>is_active</th></tr></thead><tbody><tr><td>1</td><td>A-001</td><td>Флешка 32GB</td><td>12</td><td>790</td><td>1</td></tr><tr><td>2</td><td>B-100</td><td>Кабель USB-C</td><td>0</td><td>390</td><td>1</td></tr><tr><td>3</td><td>C-777</td><td>Клавиатура</td><td>5</td><td>2490</td><td>1</td></tr><tr><td>4</td><td>D-050</td><td>Мышь беспроводная</td><td>0</td><td>1290</td><td>0</td></tr><tr><td>5</td><td>E-010</td><td>Коврик для мыши</td><td>20</td><td>350</td><td>1</td></tr><tr><td>6</td><td>E-020</td><td>USB-хаб 4 порта</td><td>7</td><td>990</td><td>1</td></tr><tr><td>7</td><td>Y-100</td><td>Карта памяти 64GB</td><td>15</td><td>1250</td><td>1</td></tr><tr><td>8</td><td>X-000</td><td>Адаптер HDMI</td><td>3</td><td>690</td><td>1</td></tr></tbody></table>',7),n("details",{class:"hint-container details"},[n("summary",null,"Код создания таблицы на языке SQL в диалекте SQLite"),n("div",{class:"language-sql line-numbers-mode","data-highlighter":"prismjs","data-ext":"sql"},[n("pre",null,[n("code",{class:"language-sql"},[n("span",{class:"line"},[n("span",{class:"token keyword"},"CREATE"),s(),n("span",{class:"token keyword"},"TABLE")]),s(`
`),n("span",{class:"line"},[s("  inventory "),n("span",{class:"token punctuation"},"(")]),s(`
`),n("span",{class:"line"},[s("    id "),n("span",{class:"token keyword"},"INT"),s(),n("span",{class:"token keyword"},"PRIMARY"),s(),n("span",{class:"token keyword"},"KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"-- первичный ключ")]),s(`
`),n("span",{class:"line"},[s("    sku "),n("span",{class:"token keyword"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"NOT"),s(),n("span",{class:"token boolean"},"NULL"),s(),n("span",{class:"token keyword"},"UNIQUE"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"-- уникальный артикул")]),s(`
`),n("span",{class:"line"},[s("    title "),n("span",{class:"token keyword"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"NOT"),s(),n("span",{class:"token boolean"},"NULL"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"-- наименование")]),s(`
`),n("span",{class:"line"},[s("    amount "),n("span",{class:"token keyword"},"INT"),s(),n("span",{class:"token operator"},"NOT"),s(),n("span",{class:"token boolean"},"NULL"),s(),n("span",{class:"token keyword"},"DEFAULT"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"-- остаток (шт.)")]),s(`
`),n("span",{class:"line"},[s("    price "),n("span",{class:"token keyword"},"INT"),s(),n("span",{class:"token boolean"},"NULL"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"-- цена (руб.)")]),s(`
`),n("span",{class:"line"},[s("    is_active "),n("span",{class:"token keyword"},"BOOLEAN"),s(),n("span",{class:"token operator"},"NOT"),s(),n("span",{class:"token boolean"},"NULL"),s(),n("span",{class:"token keyword"},"DEFAULT"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token comment"},"-- 1=активен, 0=скрыт")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"INSERT"),s(),n("span",{class:"token keyword"},"INTO")]),s(`
`),n("span",{class:"line"},[s("  inventory "),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},","),s(" sku"),n("span",{class:"token punctuation"},","),s(" title"),n("span",{class:"token punctuation"},","),s(" amount"),n("span",{class:"token punctuation"},","),s(" price"),n("span",{class:"token punctuation"},","),s(" is_active"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"VALUES")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'A-001'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Флешка 32GB'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"12"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"790"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'B-100'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Кабель USB-C'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"390"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'C-777'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Клавиатура'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2490"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'D-050'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Мышь беспроводная'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1290"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'E-010'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Коврик для мыши'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"20"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"350"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'E-020'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'USB-хаб 4 порта'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"7"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"990"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"7"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Y-100'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Карта памяти 64GB'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"15"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1250"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'X-000'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Адаптер HDMI'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"690"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])]),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"inventory_01_sqlite.sql"})],-1),a(`<div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Операторы <code>INSERT</code>, <code>UPDATE</code> и <code>DELETE</code> <strong>не выводят изменения на экран</strong>. Чтобы убедиться в результате, обычно выполняют <code>SELECT</code> <strong>после</strong> модификации.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre id="auto_select_after"><code class="language-sql"><span class="line"><span class="token comment">-- чтобы видеть значения NULL</span></span>
<span class="line"><span class="token punctuation">.</span>nullvalue <span class="token string">&#39;NULL&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- здесь может идти код модификации:</span></span>
<span class="line"><span class="token comment">##CODE##</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- запрашиваем состояние таблицы ПОСЛЕ внесения изменений</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> inventory<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>В наших интерактивных блоках лекций эти запросы будут выполняться автоматически.</strong></p></div><p>Посмотреть все данные исходной таблицы до каких-либо модификаций мы можем запросом:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> inventory<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,3),n("codapi-snippet",{sandbox:"sqlite",editor:"basic","depends-on":"inventory_01_sqlite.sql"},null,-1),a(`<p>ТЕСТОВЫЙ ПРИМЕР УДАЛЕНИЯ</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> inventory <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,2),n("codapi-snippet",{sandbox:"sqlite",editor:"basic","depends-on":"inventory_01_sqlite.sql",template:"#auto_select_after"},null,-1),a(`<h2 id="insert-—-добавление-строк" tabindex="-1"><a class="header-anchor" href="#insert-—-добавление-строк"><span>INSERT — добавление строк</span></a></h2><p>Для добавления новых записей в таблицу предназначен оператор <code>INSERT</code>.<br> Рассмотрим его общую структуру.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> имя_таблицы <span class="token punctuation">[</span><span class="token punctuation">(</span>поле_таблицы<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token comment">-- значения прописанные вручную</span></span>
<span class="line"><span class="token keyword">VALUES</span> <span class="token punctuation">(</span>значение_поля_таблицы<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">-- или значения полученные запросом SELECT</span></span>
<span class="line"><span class="token keyword">SELECT</span> поле_таблицы<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> имя_таблицы <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Значения можно вставлять перечислением с помощью слова <code>VALUES</code>, перечислив их в круглых скобках через запятую или c помощью оператора <code>SELECT</code>.</p><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>Следует помнить, что первичный ключ таблицы является уникальным значением и добавление уже существующего значения приведёт к ошибке, но в большинстве СУБД для решения подобной задачи в автоматическом режиме принято использовать уникальное свойство поля <code>AUTO_INCREMENT</code> (в MySQL) или <code>AUTOINCREMENT</code> (SQLite). Подробнее их мы разберём в последующих темах.</p></div><p>Добавление записей через <code>INSERT INTO ... SELECT ...</code> мы рассмотрим в рамках данного курса позднее, когда научимся работать с несколькими таблицами.</p><h3 id="вставка-однои-строки" tabindex="-1"><a class="header-anchor" href="#вставка-однои-строки"><span>Вставка одной строки</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> inventory <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sku<span class="token punctuation">,</span> title<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> price<span class="token punctuation">,</span> is_active<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">&#39;Z-900&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Тестовый товар&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1200</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,8),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"insert_one.sql","depends-on":"inventory_01_sqlite.sql",template:"#auto_select_after"},null,-1),a(`<h3 id="вставка-нескольких-строк" tabindex="-1"><a class="header-anchor" href="#вставка-нескольких-строк"><span>Вставка нескольких строк</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> inventory <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sku<span class="token punctuation">,</span> title<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> price<span class="token punctuation">,</span> is_active<span class="token punctuation">)</span> <span class="token keyword">VALUES</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&#39;E-030&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;USB-хаб 10 портов&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1990</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">&#39;E-031&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;USB-хаб 3 порта&#39;</span><span class="token punctuation">,</span>   <span class="token number">9</span><span class="token punctuation">,</span>  <span class="token number">690</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"insert_multiple.sql","depends-on":"insert_one.sql",template:"#auto_select_after"},null,-1),a(`<h3 id="вставка-null" tabindex="-1"><a class="header-anchor" href="#вставка-null"><span>Вставка <code>NULL</code></span></a></h3><p>Если цена неизвестна, мы можем явно передать значение <code>NULL</code>.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> inventory <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sku<span class="token punctuation">,</span> title<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> price<span class="token punctuation">,</span> is_active<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">&#39;P-002&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Переходник miniDP→HDMI&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,3),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"insert_null.sql","depends-on":"insert_multiple.sql",template:"#auto_select_after"},null,-1),a(`<h3 id="значения-по-умолчанию" tabindex="-1"><a class="header-anchor" href="#значения-по-умолчанию"><span>Значения по-умолчанию</span></a></h3><p>В исходной таблице значения полей <code>amount</code> и <code>is_active</code> определяются через свойство <code>DEFAULT</code>. В дальнейшем мы детально рассмотрим все свойства полей, но сейчас важно лишь то, что при создании таблицы можно задать значения по умолчанию. Если при вставке данных конкретное значение не указано, система автоматически использует значение, определённое в свойстве <code>DEFAULT</code>.</p><p>Например, <code>amount=0</code> и <code>is_active=1</code> подставятся автоматически, т.к. они заданы по-умолчанию для соответствующих строк.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> inventory <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sku<span class="token punctuation">,</span> title<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">&#39;P-001&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Переходник microSD&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,4),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"insert_default.sql","depends-on":"insert_null.sql",template:"#auto_select_after"},null,-1),a(`<h3 id="обработка-конфликтов-для-уникальных-значении" tabindex="-1"><a class="header-anchor" href="#обработка-конфликтов-для-уникальных-значении"><span>Обработка конфликтов для уникальных значений</span></a></h3><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>Если столбец должен быть уникальным, но не является первичным ключом, используют <strong>ограничение <code>UNIQUE</code></strong> или <strong>уникальный индекс</strong>. <code>UNIQUE</code> гарантирует отсутствие дубликатов, но некоторых СУБД допускает единственное <code>NULL</code>.</p></div><p>При попытке вставить в таблицу неуникальное значение в поле, определенное при помощи уникального индекса, возникнет ошибка.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> inventory <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sku<span class="token punctuation">,</span> title<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> price<span class="token punctuation">,</span> is_active<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">&#39;A-001&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Дубликат флешки&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,4),n("codapi-snippet",{sandbox:"sqlite",editor:"basic","depends-on":"insert_default.sql"},null,-1),a(`<p>В таком случае, в SQLite мы можем обработать данную ситуацию несколькими способами, которые рассмотрим дальше в рамках курса, а пока проще всего — «мягко» игнорировать такую ситуацию при помощи <code>INSERT OR IGNORE</code>, в таком случае мы не увидим никаких сообщений об ошибке, но и вставить данные очевидно не получится.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token operator">OR</span> <span class="token keyword">IGNORE</span> <span class="token keyword">INTO</span> inventory <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sku<span class="token punctuation">,</span> title<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> price<span class="token punctuation">,</span> is_active<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">&#39;A-001&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Дубликат флешки&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,2),n("codapi-snippet",{sandbox:"sqlite",editor:"basic","depends-on":"insert_default.sql",template:"#auto_select_after"},null,-1),a(`<h2 id="update-—-изменение-строк" tabindex="-1"><a class="header-anchor" href="#update-—-изменение-строк"><span>UPDATE — изменение строк</span></a></h2><p>Для редактирования существующих записей в таблицах существует SQL оператор <code>UPDATE</code>.<br> Рассмотрим его общую структуру.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">UPDATE</span> имя_таблицы</span>
<span class="line"><span class="token keyword">SET</span> поле_таблицы<span class="token number">1</span> <span class="token operator">=</span> значение_поля_таблицы<span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">    поле_таблицыN <span class="token operator">=</span> значение_поля_таблицыN</span>
<span class="line"><span class="token punctuation">[</span><span class="token keyword">WHERE</span> условие_выборки<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>В различных СУБД существуют некоторые ограничения на изменения полей, в большинстве из них связка <code>UPDATE ... SET</code> не будет работать без <code>WHERE</code>. В MySQL по-умолчанию включен т.н. «безопасный режим» или <code>safe_mode</code>, который не позволит выполнить запрос обновления без <code>WHERE</code>, при этом будет требоваться чтобы одним из условий <code>WHERE</code> было ключевое поле. Тем не менее, подобные ограничения отключаемы, но они защищают от случайно обновления лишних данных при неверно написанном запросе. Несмотря на то что в SQLite такого ограничения нет, настоятельно рекомендуется <strong>всегда указывать</strong> после <code>WHERE</code> условия, содержащие первичные ключи.</p></div><h3 id="точечное-обновление-по-первичному-ключу" tabindex="-1"><a class="header-anchor" href="#точечное-обновление-по-первичному-ключу"><span>Точечное обновление по первичному ключу</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">UPDATE</span> inventory</span>
<span class="line"><span class="token keyword">SET</span> price <span class="token operator">=</span> <span class="token number">2990</span><span class="token punctuation">,</span></span>
<span class="line">    amount <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"><span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"update_id_3.sql","depends-on":"insert_default.sql",template:"#auto_select_after"},null,-1),a(`<h3 id="вычисляемые-значения" tabindex="-1"><a class="header-anchor" href="#вычисляемые-значения"><span>Вычисляемые значения</span></a></h3><p>В запросах на обновление данных можно менять значения, опираясь на предыдущие значения.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">UPDATE</span> inventory</span>
<span class="line"><span class="token keyword">SET</span> price <span class="token operator">=</span> price <span class="token operator">*</span> <span class="token number">1.1</span><span class="token punctuation">,</span></span>
<span class="line">    amount <span class="token operator">=</span> amount <span class="token operator">+</span> <span class="token number">2</span></span>
<span class="line"><span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"update_id_5.sql","depends-on":"update_id_3.sql",template:"#auto_select_after"},null,-1),a(`<p>Разрешается также значения одних столбцов присваивать другим столбцам. Но при этом, естественно, типы столбцов должны быть совместимыми.</p><h3 id="массовое-обновление-по-условию" tabindex="-1"><a class="header-anchor" href="#массовое-обновление-по-условию"><span>Массовое обновление по условию</span></a></h3><p>Например, если мы хотим скрыть все позиции без остатка.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">UPDATE</span> inventory</span>
<span class="line"><span class="token keyword">SET</span> is_active <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"><span class="token keyword">WHERE</span> amount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"update_is_active.sql","depends-on":"update_id_5.sql",template:"#auto_select_after"},null,-1),a(`<div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>В MySQL такая конструкция не сработает из-за требования явно указывать первичные ключи после <code>WHERE</code>, однако варианты решения подобной проблемы мы затронем позднее в рамках курса.</p></div><h2 id="delete-—-удаление-строк" tabindex="-1"><a class="header-anchor" href="#delete-—-удаление-строк"><span>DELETE — удаление строк</span></a></h2><p>Время от времени возникает задача удаления записей из таблицы. Для этого в SQL предусмотрен оператор <code>DELETE</code>.</p><h3 id="удаление-по-условию" tabindex="-1"><a class="header-anchor" href="#удаление-по-условию"><span>Удаление по условию</span></a></h3><p>Например, если нам нужно удалить скрытые позиции по которым нулевой остаток.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> inventory</span>
<span class="line"><span class="token keyword">WHERE</span></span>
<span class="line">  is_active <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token operator">AND</span></span>
<span class="line">  amount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"delete_empty.sql","depends-on":"update_is_active.sql",template:"#auto_select_after"},null,-1),a(`<h3 id="удаление-конкретнои-записи-по-id" tabindex="-1"><a class="header-anchor" href="#удаление-конкретнои-записи-по-id"><span>Удаление конкретной записи по <code>id</code></span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> inventory</span>
<span class="line"><span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,2),n("codapi-snippet",{sandbox:"sqlite",editor:"basic",id:"delete_id_11.sql","depends-on":"delete_empty.sql",template:"#auto_select_after"},null,-1),a(`<h3 id="полная-очистка-таблицы" tabindex="-1"><a class="header-anchor" href="#полная-очистка-таблицы"><span>Полная очистка таблицы</span></a></h3><p>Если условие отбора записей <code>WHERE</code> отсутствует, то будут удалены все записи указанной таблицы.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> inventory<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,3),n("codapi-snippet",{sandbox:"sqlite",editor:"basic","depends-on":"delete_id_11.sql",template:"#auto_select_after"},null,-1),a(`<div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>С включенным <code>safe_mode</code> СУБД MySQL такую операцию выполнить не позволит, сообщив о том что операция небезопасна, и выкинет соответствующую ошибку. При этом, в SQLite всё пройдёт без ошибок, однако <code>SELECT</code> ничего не выведет, т.к. таблица пуста.</p></div><hr><h2 id="практические-задания" tabindex="-1"><a class="header-anchor" href="#практические-задания"><span>Практические задания</span></a></h2><ul><li><p><strong>INSERT-1.</strong> Добавить запись: <code>id=101, sku=&#39;T-100&#39;, title=&#39;Кабель HDMI 2м&#39;, amount=5, price=450, is_active=1</code>.</p></li><li><p><strong>INSERT-2.</strong> Одним запросом вставить две записи:<br><code>id=102, sku=&#39;T-200&#39;, title=&#39;Адаптер USB-A→USB-C&#39;, amount=10, price=290, is_active=1</code> и<br><code>id=103, sku=&#39;T-201&#39;, title=&#39;Адаптер USB-C→Jack 3.5&#39;, amount=4, price=NULL, is_active=1</code>.</p></li><li><p><strong>UPDATE-1.</strong> Для <code>id=3</code> увеличить <code>price</code> на 200 и <code>amount</code> на 1.</p></li><li><p><strong>UPDATE-2.</strong> Для всех строк с <code>amount=0</code> установить <code>is_active=0</code>.</p></li><li><p><strong>DELETE-1.</strong> Удалить строку с <code>sku=&#39;X-000&#39;</code>.</p></li><li><p><strong>DELETE-2.</strong> Удалить все строки, где <code>is_active=0 AND amount=0</code>.</p></li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token comment">-- Ваш код можете писать тут</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),n("codapi-snippet",{sandbox:"sqlite",editor:"basic","depends-on":"inventory_01_sqlite.sql",template:"#auto_select_after"},null,-1)])])}const u=t(c,[["render",o]]),r=JSON.parse('{"path":"/disciplines/it03/lectures/08_lecture.html","title":"ИТ.03 - 08 - Добавление, обновление и удаление данных: операторы INSERT, UPDATE, DELETE","lang":"ru-RU","frontmatter":{"description":"ИТ.03 - 08 - Добавление, обновление и удаление данных: операторы INSERT, UPDATE, DELETE Введение В предыдущих темах мы извлекали и агрегировали данные (SELECT, фильтры, сортиров...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ИТ.03 - 08 - Добавление, обновление и удаление данных: операторы INSERT, UPDATE, DELETE\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-10-30T05:09:31.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://it.vshp.online/disciplines/it03/lectures/08_lecture.html"}],["meta",{"property":"og:site_name","content":"Кафедра ИТ"}],["meta",{"property":"og:title","content":"ИТ.03 - 08 - Добавление, обновление и удаление данных: операторы INSERT, UPDATE, DELETE"}],["meta",{"property":"og:description","content":"ИТ.03 - 08 - Добавление, обновление и удаление данных: операторы INSERT, UPDATE, DELETE Введение В предыдущих темах мы извлекали и агрегировали данные (SELECT, фильтры, сортиров..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ru-RU"}],["meta",{"property":"og:updated_time","content":"2025-10-30T05:09:31.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-30T05:09:31.000Z"}]]},"git":{"updatedTime":1761800971000,"contributors":[{"name":"PAVEL TKACHEV","username":"","email":"phoenixweiss@ya.ru","commits":1}],"changelog":[{"hash":"615b45ce5d1f1f3761ff7f696aac849f0946b2c3","time":1761800971000,"email":"phoenixweiss@ya.ru","author":"PAVEL TKACHEV","message":"Update <a href=\\"http://index.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">index.md</a>, 08_lecture.md, inventory_01_sqlite.sql, and 1 more file"}]},"autoDesc":true,"filePathRelative":"disciplines/it03/lectures/08_lecture.md"}');export{u as comp,r as data};
