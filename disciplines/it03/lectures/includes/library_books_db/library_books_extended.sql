-- Таблица книг
CREATE TABLE
  books (
    id INTEGER PRIMARY KEY,
    title TEXT NOT NULL,
    publication_year INTEGER,
    isbn TEXT UNIQUE,
    genre TEXT,
    pages INTEGER,
    available_copies INTEGER DEFAULT 1
  )
;

-- Таблица авторов
CREATE TABLE
  authors (
    id INTEGER PRIMARY KEY,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    birth_year INTEGER,
    nationality TEXT
  )
;

-- Таблица связи многие-ко-многим между книгами и авторами
CREATE TABLE
  book_authors (
    book_id INTEGER,
    author_id INTEGER,
    FOREIGN KEY (book_id) REFERENCES books(id),
    FOREIGN KEY (author_id) REFERENCES authors(id)
  )
;

-- Вставка данных в таблицу книг
INSERT INTO
  books (id, title, publication_year, isbn, genre, pages, available_copies)
VALUES
  (1, 'Война и мир', 1869, '978-5-17-081547-7', 'Роман', 1225, 3),
  (2, 'Преступление и наказание', 1866, '978-5-17-079456-3', 'Роман', 671, 2),
  (3, 'Мастер и Маргарита', 1967, '978-5-17-082141-6', 'Роман', 480, 1),
  (4, 'Евгений Онегин', 1833, '978-5-17-081548-4', 'Поэма', 224, 4),
  (5, 'Анна Каренина', 1877, '978-5-17-081549-1', 'Роман', 864, 2),
  (6, 'Собачье сердце', 1925, '978-5-17-081550-7', 'Повесть', 120, 3),
  (7, 'Идиот', 1869, '978-5-17-081551-4', 'Роман', 640, 1),
  (8, 'Братья Карамазовы', 1880, '978-5-17-081552-1', 'Роман', 992, 2),
  (9, 'Горе от ума', 1825, '978-5-17-081553-8', 'Комедия', 224, 2)
;

-- Вставка данных в таблицу авторов
INSERT INTO
  authors (id, first_name, last_name, birth_year, nationality)
VALUES
  (1, 'Лев', 'Толстой', 1828, 'Россия'),
  (2, 'Федор', 'Достоевский', 1821, 'Россия'),
  (3, 'Михаил', 'Булгаков', 1891, 'Россия'),
  (4, 'Александр', 'Пушкин', 1799, 'Россия'),
  (5, 'Александр', 'Грибоедов', 1795, 'Россия')
;

-- Вставка данных в таблицу связи книг и авторов
INSERT INTO
  book_authors (book_id, author_id)
VALUES
  (1, 1), -- Война и мир - Лев Толстой
  (2, 2), -- Преступление и наказание - Федор Достоевский
  (3, 3), -- Мастер и Маргарита - Михаил Булгаков
  (4, 4), -- Евгений Онегин - Александр Пушкин
  (5, 1), -- Анна Каренина - Лев Толстой
  (6, 3), -- Собачье сердце - Михаил Булгаков
  (7, 2), -- Идиот - Федор Достоевский
  (8, 2), -- Братья Карамазовы - Федор Достоевский
  (9, 5)  -- Горе от ума - Александр Грибоедов
;