# ИТ.03 - 16 - Введение в MySQL: назначение, редакции, архитектура, особенности, отличие от SQLite

## Введение

Во втором семестре курс переходит от базовых концепций и SQLite к работе с полнофункциональной серверной СУБД. Эта тема дает общее представление о MySQL: что это за система, как она устроена, почему ее выбирают в реальных проектах и чем она отличается от SQLite.

## Что такое MySQL

![MySQL | 240x0](../img/mysql_logo.svg)

MySQL — это реляционная СУБД с клиент-серверной архитектурой. В отличие от SQLite, которая работает как встроенная библиотека в одном процессе, MySQL — отдельный сервер, к которому подключаются клиенты. Это обеспечивает многопользовательский доступ, централизованное управление, безопасность и масштабирование.

## Клиент-серверная архитектура

MySQL работает как отдельный серверный процесс. Клиенты подключаются к нему по сети или на том же компьютере, отправляют SQL-запросы и получают результаты. Сервер в ответ управляет доступом, выполняет запросы и отвечает за целостность данных.

Это дает несколько практических эффектов:

- **Многопользовательская работа**: десятки и сотни клиентов могут работать одновременно.
- **Единое управление**: права доступа, резервные копии и обновления контролируются в одном месте.
- **Изоляция и безопасность**: данные не «лежат рядом с приложением», доступ идет только через сервер.
- **Масштабируемость**: сервер можно переносить, дублировать или усиливать отдельными ресурсами.

Ниже упрощенная схема взаимодействия: несколько клиентов подключаются к серверу, который управляет данными.

```mermaid
flowchart LR
  subgraph Clients[Клиенты]
    A[CLI/утилиты]
    B[Веб-приложение]
    C[Отчетные системы]
  end
  A <--> S[(MySQL Server)]
  B <--> S
  C <--> S
  S --> D[Файлы данных и журналов]
```

## Из чего состоит MySQL

- **Сервер MySQL** — основной процесс, принимающий подключения и выполняющий запросы.
- **SQL-уровень** — обработка запросов SQL (языка запросов к базе), оптимизация и выбор плана выполнения.
- **Хранилище данных** — подсистема, которая хранит таблицы на диске и выполняет операции чтения/записи.
- **Метаданные** — описание структуры базы: схем, таблиц и пользователей.
- **Журналы** — файлы записей о работе сервера и изменениях в базах данных.
- **Клиенты** — консольный клиент и админ-инструменты для работы с сервером.
- **Драйверы** — библиотеки для подключения к MySQL из разных языков программирования.

## Движки хранения и роль InnoDB

Движок хранения — это «механизм» хранения таблиц внутри MySQL. Разные движки решают разные задачи: где-то важнее надежность и целостность данных, где-то — скорость чтения или компактность.

В одной базе можно использовать разные движки для разных таблиц. Это полезно, когда у таблиц разные требования: например, для критичных данных нужен более надежный механизм, а для вспомогательных или временных — более быстрый или простой. Поэтому важно понимать, что «движок» — это настройка конкретной таблицы, а не всей базы целиком.

- **InnoDB** — базовый движок. Он обеспечивает надежность данных, поддерживает связи между таблицами и корректное восстановление после сбоев. В большинстве задач это правильный выбор.
- **MyISAM** — старый движок без надежного восстановления после сбоев и без связей между таблицами. В современных проектах используется редко.
- **Другие движки** — существуют специализированные варианты вроде Memory (данные в памяти), Archive (сжатое хранение), NDB (для распределенной работы). В учебной практике обычно не нужны, но важно знать, что выбор не ограничивается двумя вариантами.

::: tip
В учебных заданиях мы ориентируемся на InnoDB, потому что он соответствует современным требованиям к надежности и целостности данных.
:::

## Зачем выбирают MySQL и какие возможности это дает

MySQL выбирают, когда нужна серверная база данных, которая стабильно работает под нагрузкой и легко обслуживается. Это дает несколько практических преимуществ:

- **Многопользовательская работа**. Пользователи и приложения подключаются одновременно, а доступ регулируется учетными записями и правами.
- **Надежность данных**. Связи между таблицами и контроль целостности помогают избежать «сломанных» данных, а после сбоя система умеет восстановиться.
- **Производительность**. Индексы (структуры для ускорения поиска) и оптимизация запросов позволяют работать быстрее на больших объемах.
- **Масштабируемость**. Данные можно копировать на другие серверы и распределять нагрузку между ними.
- **Управляемость**. Логи и мониторинг помогают администрировать систему и находить проблемы.
- **Экосистема**. Есть много инструментов, библиотек и готовых решений, что облегчает разработку.

## Безопасность и управление доступом

MySQL рассчитана на многопользовательскую работу, поэтому в ней есть мощные механизмы безопасности. Пример простой модели доступа:

- **администратор** — создает пользователей, управляет правами и резервным копированием
- **разработчик** — читает и изменяет данные своих баз данных, без доступа к системным настройкам
- **аналитик** — имеет только чтение нужных таблиц и отчетов

Роль — это набор прав, который назначается пользователю для его задач.

## Логирование и диагностика

Логирование — это процесс фиксации важных событий работы сервера и изменений в базе. Логи помогают понять, что происходило в системе, отследить ошибки и восстановить цепочку действий при сбоях.

Зачем это нужно на практике:

- **поиск ошибок** — когда приложение ведет себя неправильно и нужно найти причину
- **анализ медленных запросов** — чтобы увидеть узкие места и ускорить работу
- **восстановление после сбоев** — чтобы понять, что произошло, и вернуть данные

MySQL ведет несколько типов логов для разных задач:

- **лог ошибок** — хранит сообщения о сбоях и проблемах запуска
- **общий лог запросов** — фиксирует все запросы (обычно используют для диагностики)
- **лог медленных запросов** — помогает выявить тяжёлые запросы
- **журнал изменений** — используется для восстановления и копирования данных между серверами

## Краткая история и релизная модель

MySQL появилась в середине 1990-х годов как компактная и быстрая реляционная СУБД. Проект развивала компания MySQL AB. В 2008 году MySQL AB была куплена Sun Microsystems, а в 2010 году Sun перешла под контроль Oracle. С этого момента Oracle поддерживает MySQL как коммерческий продукт с открытой Community-редакцией.

Основные вехи развития можно представить так:

| Период | Версии | Ключевые особенности |
| --- | --- | --- |
| 1995 | ранние версии | первые стабильные релизы и рост популярности |
| 2009 | 5.4 | усиление производительности и масштабирования |
| 2010 | 5.5 | InnoDB становится основным движком |
| 2013 | 5.6 | рост производительности и улучшения репликации |
| 2015 | 5.7 | зрелая ветка, улучшения безопасности и форматов данных |
| 2018 | 8.0 | переход на современную линию MySQL и новые возможности SQL |
| 2024 | 8.4 LTS | долгосрочная стабильная поддержка |
| 2024+ | 9.x Innovation | быстрые релизы с новыми возможностями |

Номера 6 и 7 официально не выпускались: это были внутренние ветки разработки, поэтому переход сразу к 8.0 — нормальная практика в истории MySQL.

MySQL использует две линии релизов:

- **LTS (Long Term Support)** — Долгосрочная поддержка, обеспечивает стабильность и безопасность, а также предсказуемое поведение в реальных бизнес-задачах.
- **Innovation** — частые обновления — предлагает новые возможности и улучшения.

## Редакции и варианты поставки

На практике важно различать не только версии, но и редакции MySQL.

- **MySQL Community Edition** — бесплатная версия с открытым исходным кодом. Этой редакции хватает для учебы и для большинства небольших и средних проектов.
- **MySQL Enterprise Edition** — коммерческая редакция с расширенными инструментами администрирования, мониторинга и поддержки. Стоимость обычно исчисляется тысячами долларов в год на сервер, поэтому ее выбирают крупные компании.
- **MySQL Cluster (NDB)** — вариант для распределенного хранения и высокой доступности.
- **Облачные сервисы** — управляемые экземпляры MySQL у провайдеров, где часть администрирования берет на себя платформа.

Многие проекты годами работают на бесплатной Community-редакции. Переход к Enterprise обычно нужен, когда появляются строгие требования к поддержке, аудитам и специализированным инструментам.

::: info

Для учебных задач мы используем **MySQL Community Edition 8.4 LTS** — это бесплатная редакция с долгосрочной поддержкой, которой достаточно для большинства задач.

:::

## Отличия MySQL от SQLite

| Характеристика | MySQL | SQLite |
| --- | --- | --- |
| Архитектура | клиент-сервер | встраиваемая БД в виде библиотеки |
| Хранение данных | набор файлов внутри каталога сервера | один файл базы данных |
| Многопользовательский доступ | рассчитан на множество одновременных подключений | одновременная запись ограничена: остальные ждут |
| Типизация | строгая, с широким набором типов | гибкая типизация без жесткой проверки |
| Функциональность | серверные сценарии, автоматические действия, репликация | нет серверных сценариев и репликации |
| Масштабирование | поддержка репликации и распределения нагрузки | ориентирован на локальные приложения |
| Администрирование | учетные записи, роли, права | управление файлами и подключениями |

### Примеры выбора СУБД

- **Локальное приложение**. Если база живет внутри программы и работает на одном компьютере, чаще всего достаточно SQLite — ее легко встроить и не нужно отдельное администрирование.
- **Веб-сервис с несколькими пользователями**. Когда к данным обращаются многие пользователи и сервисы, удобнее MySQL: есть сервер, права доступа и возможность масштабировать нагрузку.
- **Учебная или лабораторная среда**. SQLite проще для быстрого старта, а MySQL полезна, чтобы отработать навыки серверной работы и администрирования.

## Когда выбирать MySQL

MySQL подходит для серверных приложений, где нужны многопользовательский доступ, контроль прав, устойчивость к нагрузке и возможность масштабирования. SQLite удобна в локальных или встраиваемых проектах, где важна простота развертывания и минимальные требования к инфраструктуре.

## Заключение

MySQL — это зрелая серверная СУБД с развитой экосистемой, системой безопасности и возможностями масштабирования. Понимание ее архитектуры, роли движков хранения и релизной модели дает базу для дальнейшей практики и работы с инструментами администрирования.

## Самопроверка

::: quiz source=./includes/quiz-16.yaml
:::

---

## Полезные ссылки

- [MySQL Documentation](https://dev.mysql.com/doc/)
- [MySQL 8.4 Reference Manual](https://dev.mysql.com/doc/refman/8.4/en/)
- [The InnoDB Storage Engine](https://dev.mysql.com/doc/refman/8.4/en/innodb-storage-engine.html)
