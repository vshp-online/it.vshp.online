<!-- @include: ./includes/_disclaimer.md -->

# ОП.08 - 13 - Изменение таблиц. Операция `ALTER TABLE`

Примеры данной темы используют учебную БД:

<details>
<summary><b>articles_01.sql</b></summary>

[articles_01.sql](./includes/articles_01.sql)

</details>

## Команда `ALTER TABLE`

`ALTER TABLE` — это команда SQL, которая позволяет изменять структуру таблицы в базе данных. Эта команда может использоваться для добавления, удаления или изменения столбцов, индексов и ограничений. Важно помнить, что изменение таблицы может повлиять на целостность данных, поэтому необходимо тщательно продумывать каждое изменение.

Примеры изменения таблицы при помощи `ALTER TABLE` в MySQL 8:

## Добавление столбца

Чтобы добавить новый столбец в таблицу, используйте следующий синтаксис:

```sql
ALTER TABLE table_name ADD column_name data_type;
```

Например, чтобы добавить столбец "phone" в которой будет содержаться рекламный телефон для связи по теме статьи с типом данных `VARCHAR(20)` в таблицу "articles", используйте следующую команду:

```sql
ALTER TABLE articles ADD phone VARCHAR(20);
```

## Изменение столбца

Чтобы изменить тип данных столбца, используйте следующий синтаксис:

```sql
ALTER TABLE table_name MODIFY column_name new_data_type;
```

Например, чтобы изменить тип данных столбца "phone" на `BIGINT` в таблице "articles", используйте следующую команду:

```sql
ALTER TABLE articles MODIFY phone BIGINT;
```

> [!TIP]
> Обратите внимание, что успех запроса будет зависеть от того возможно ли преобразовать данные, которые содержатся в соответствующих столбцах без потерь. Если данные будут не совместимы, то СУБД вернет ошибку.

Чтобы изменить название столбца, используйте следующий синтаксис:

```sql
ALTER TABLE table_name CHANGE old_column_name new_column_name new_data_type;
```

Например, чтобы изменить название столбца phone на ad_phone:

```sql
ALTER TABLE articles CHANGE phone ad_phone VARCHAR(12);
```

## Удаление столбца

Чтобы удалить столбец из таблицы, используйте следующий синтаксис:

```sql
ALTER TABLE table_name DROP column_name;
```

Например, чтобы удалить столбец "ad_phone" из таблицы "articles", используйте следующую команду:

```sql
ALTER TABLE articles DROP ad_phone;
```

## Задания для самопроверки

1. Изменить тип данных столбца content с TEXT (65 535 символов) на MEDIUMTEXT (16 777 215 символов):

```sql
ALTER TABLE articles MODIFY content MEDIUMTEXT;
```

2. Добавить новый столбец views для отслеживания количества просмотров статьи:

```sql
ALTER TABLE articles ADD COLUMN views INT UNSIGNED DEFAULT 0;
```

3. Изменить название столбца date_created на created_at:

```sql
ALTER TABLE articles CHANGE date_created created_at DATE;
```

4. Удалить столбец author_id:

```sql
ALTER TABLE articles DROP COLUMN author_id;
```

5. Изменить значение по умолчанию для столбца views на 1:

```sql
ALTER TABLE articles ALTER COLUMN views SET DEFAULT 1;
```

6. Изменить тип данных столбца title на VARCHAR(255):

```sql
ALTER TABLE articles MODIFY title VARCHAR(255);
```

7. Изменить значение столбца views для всех статей, у которых оно равно 0, на 1:

```sql
UPDATE articles SET views = 1 WHERE views = 0;
```

8. Изменить тип данных столбца created_at с DATE на DATETIME:

```sql
ALTER TABLE articles MODIFY created_at DATETIME;
```
