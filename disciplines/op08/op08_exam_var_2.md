# ОП.08 - Практический экзамен - Вариант №2

## База данных домашней коллекции книг

Необходимо разработать БД, в которой должны быть отражены следующие сущности:

- Сущность «Книга»
  - Атрибут «Наименование книги»
  - Атрибут «Год издания»
- Сущность «Автор»
  - Атрибут «Имя автора»
- Сущность «Жанр»
  - Атрибут «Жанр книги»
- Сущность «Полка»
  - Атрибут «Название полки»

При этом, учесть, что:

- У одного автора может быть несколько книг
- У книги может быть только один автор
- На одной полке может быть ни одной, одна или несколько книг
- У книги может быть только один жанр

Необходимо четко указывать названия таблиц и полей, в которые будет занесена информация.

Необходимо импортировать в созданную БД данные:

::: details exam_var_2_data.sql

```sql :collapsed-lines=5
@include: ./includes/exam_var_2_data.sql
```

:::

## Задачи

Необходимо разнести данные из временной таблицы `tmp` в каждую из вновь созданных в соответствии со структурой таблиц БД, при этом сохранив все связи, после чего таблицу `tmp` необходимо удалить из БД.

Необходимо написать соответствующие SQL-запросы для выполнения следующих действий с базой данных:

1. Для каждого автора показать список его книг (отсортировать по автору)
2. Вывести количество изданных за год книг у одного любого автора
3. Найти автора с самым большим числом книг
4. Найти все дублирующиеся книги в рамках одного автора, удалить лишние, оставив только одну (на примере одного любого набора дублей)
5. Вывести авторов всех книг из любого местоположения на выбор
6. Вывести пять самых старых книг
7. Вывести общее количество книг на любой полке

::: tip

Рекомендуемый порядок разбора данных:

1. __Жанр__ (первичный ключ `id` генерируемый)
2. __Полка__ (первичный ключ `id` генерируемый)
3. __Автор__ (первичный ключ `id` генерируемый)
4. __Книга__ (можно использовать `id` из `tmp` как первичный ключ)

:::

## Результат

Задание должно быть выполнено в локальной файловой системе компьютера. Папка со всеми файлами задания должна называться:

__`ОП.08 - Вариант 2 - Иванов И.И.`__

где вместо `Иванов И.И.` должны быть указаны фамилия и инициалы сдающего.

Результат выполнения задания должен быть оформлен в виде файлов:

1. Файл дампа итоговой БД в формате SQL, должен называться: `db_2.sql`
2. Файл последовательных SQL-запросов для каждого из пунктов задания, должен называться: `task_2.sql`, каждый запрос должен отделяться комментарием с номером соответствующего пункта задания
3. Файл, отражающий ERD-диаграмму созданной БД со всеми связями, должен называться `erd_2.png`
