<!doctype html>
<html lang="ru-RU">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.25" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"МДК.11.01 - 14 - Введение в транзакции","image":[""],"dateModified":"2025-10-24T14:30:06.000Z","author":[]}</script><meta property="og:url" content="https://it.vshp.online/disciplines/mdk1101/lectures/14_lecture.html"><meta property="og:site_name" content="Кафедра ИТ"><meta property="og:title" content="МДК.11.01 - 14 - Введение в транзакции"><meta property="og:description" content="МДК.11.01 - 14 - Введение в транзакции Реляционные БД проектируются с учётом необходимости сохранения целостности данных. Целостность данных — это полнота, точность и единообраз..."><meta property="og:type" content="article"><meta property="og:locale" content="ru-RU"><meta property="og:updated_time" content="2025-10-24T14:30:06.000Z"><meta property="article:modified_time" content="2025-10-24T14:30:06.000Z"><link rel="icon" href="/images/logo.svg"><title>МДК.11.01 - 14 - Введение в транзакции | Кафедра ИТ</title><meta name="description" content="МДК.11.01 - 14 - Введение в транзакции Реляционные БД проектируются с учётом необходимости сохранения целостности данных. Целостность данных — это полнота, точность и единообраз...">
    <link rel="preload" href="/assets/style-DQ1j8bbs.css" as="style"><link rel="stylesheet" href="/assets/style-DQ1j8bbs.css">
    <link rel="modulepreload" href="/assets/app-TjX1P9Ye.js"><link rel="modulepreload" href="/assets/14_lecture.html-BcjCsFAJ.js">
    <link rel="prefetch" href="/assets/index.html-B6vrtUjw.js" as="script"><link rel="prefetch" href="/assets/LICENSE.html-DhQYh914.js" as="script"><link rel="prefetch" href="/assets/about.html-CP2l3MQr.js" as="script"><link rel="prefetch" href="/assets/curriculum.html-9TIjz5xm.js" as="script"><link rel="prefetch" href="/assets/partners.html-C0P3X_pD.js" as="script"><link rel="prefetch" href="/assets/structure.html-k81T2ZOH.js" as="script"><link rel="prefetch" href="/assets/welcome.html-CwsOm3hZ.js" as="script"><link rel="prefetch" href="/assets/index.html-4l_B9cXu.js" as="script"><link rel="prefetch" href="/assets/index.html-YdWtI0Vq.js" as="script"><link rel="prefetch" href="/assets/markdown-codapi.html-DyGTY2lO.js" as="script"><link rel="prefetch" href="/assets/markdown-ext.html-C4lTCUpn.js" as="script"><link rel="prefetch" href="/assets/markdown-hint-containers.html-m2DXUwKc.js" as="script"><link rel="prefetch" href="/assets/markdown-include.html-1uHGOTtG.js" as="script"><link rel="prefetch" href="/assets/markdown-math.html-BscVg6HD.js" as="script"><link rel="prefetch" href="/assets/markdown-preview.html-B7UCRvgY.js" as="script"><link rel="prefetch" href="/assets/markdown-tabs.html-BXqfBcYb.js" as="script"><link rel="prefetch" href="/assets/mermaid.html-CJAhWy1t.js" as="script"><link rel="prefetch" href="/assets/prismjs.html-CcyYRPkd.js" as="script"><link rel="prefetch" href="/assets/railroad.html-tmJjAaSd.js" as="script"><link rel="prefetch" href="/assets/index.html-CskCNjvi.js" as="script"><link rel="prefetch" href="/assets/index.html-bff9r0m1.js" as="script"><link rel="prefetch" href="/assets/quiz.html-DNFCOUyP.js" as="script"><link rel="prefetch" href="/assets/test_dbnf.html-rNeqe_bP.js" as="script"><link rel="prefetch" href="/assets/op08_exam.html-BhtJ69X5.js" as="script"><link rel="prefetch" href="/assets/op08_exam_var_1.html-BOFP0DDH.js" as="script"><link rel="prefetch" href="/assets/op08_exam_var_2.html-C21RUjLk.js" as="script"><link rel="prefetch" href="/assets/op08_exam_var_3.html-BQCiMFw4.js" as="script"><link rel="prefetch" href="/assets/op08_exam_var_4.html-DncdWWM8.js" as="script"><link rel="prefetch" href="/assets/op08_exam_var_5.html-DBYjO-zl.js" as="script"><link rel="prefetch" href="/assets/op08_sources.html-DpQtMk2L.js" as="script"><link rel="prefetch" href="/assets/index.html-QL4GAJHG.js" as="script"><link rel="prefetch" href="/assets/index.html-Dow4-fAz.js" as="script"><link rel="prefetch" href="/assets/01_lecture.html-Dxx9aMxl.js" as="script"><link rel="prefetch" href="/assets/02_lecture.html-zhnIJkn-.js" as="script"><link rel="prefetch" href="/assets/03_lecture.html-2E-SmZzG.js" as="script"><link rel="prefetch" href="/assets/04_lecture.html-FOwmrDwZ.js" as="script"><link rel="prefetch" href="/assets/05_lecture.html-CZWI4lwQ.js" as="script"><link rel="prefetch" href="/assets/06_lecture.html-7JWZzM86.js" as="script"><link rel="prefetch" href="/assets/07_lecture.html-q4JgrOXo.js" as="script"><link rel="prefetch" href="/assets/08_lecture.html-D1WyVdsK.js" as="script"><link rel="prefetch" href="/assets/01_practical.html-BX1upxBJ.js" as="script"><link rel="prefetch" href="/assets/02_practical.html-ClzWPTw6.js" as="script"><link rel="prefetch" href="/assets/01_lecture.html-DbDSYOw2.js" as="script"><link rel="prefetch" href="/assets/02_lecture.html-DSwwhaXW.js" as="script"><link rel="prefetch" href="/assets/03_lecture.html-CMf8KzN3.js" as="script"><link rel="prefetch" href="/assets/04_lecture.html-Bf3x8fOA.js" as="script"><link rel="prefetch" href="/assets/05_lecture.html-DWVIAVR9.js" as="script"><link rel="prefetch" href="/assets/06_lecture.html-BqYs1kp7.js" as="script"><link rel="prefetch" href="/assets/07_lecture.html-Chlb8Ks4.js" as="script"><link rel="prefetch" href="/assets/08_lecture.html-DabTtQDB.js" as="script"><link rel="prefetch" href="/assets/09_lecture.html-DbjgjCyQ.js" as="script"><link rel="prefetch" href="/assets/10_lecture.html-BeXMSGTU.js" as="script"><link rel="prefetch" href="/assets/11_lecture.html-DWcikM5h.js" as="script"><link rel="prefetch" href="/assets/12_lecture.html-Bdj6Gy_M.js" as="script"><link rel="prefetch" href="/assets/13_lecture.html-v4eji69l.js" as="script"><link rel="prefetch" href="/assets/15_lecture.html-kbFDYEMI.js" as="script"><link rel="prefetch" href="/assets/16_lecture.html-BECWGUPx.js" as="script"><link rel="prefetch" href="/assets/17_lecture.html-CGCZ1AbN.js" as="script"><link rel="prefetch" href="/assets/18_lecture.html-DsSaDu6Q.js" as="script"><link rel="prefetch" href="/assets/19_lecture.html-CktAeVa6.js" as="script"><link rel="prefetch" href="/assets/20_lecture.html-n-esGlT_.js" as="script"><link rel="prefetch" href="/assets/21_lecture.html-UG_w3mnp.js" as="script"><link rel="prefetch" href="/assets/22_lecture.html-BVZmSMsN.js" as="script"><link rel="prefetch" href="/assets/22_p_bonus.html-D3YtsoIY.js" as="script"><link rel="prefetch" href="/assets/01_complexity.html-B0knUMIQ.js" as="script"><link rel="prefetch" href="/assets/02_fibonacci.html-DCFULgfM.js" as="script"><link rel="prefetch" href="/assets/03_huffman.html-Dscs7XPC.js" as="script"><link rel="prefetch" href="/assets/04_sort.html-Bv9Db2ao.js" as="script"><link rel="prefetch" href="/assets/01_tasks.html-D4YR4Ngt.js" as="script"><link rel="prefetch" href="/assets/01_arrays_lists_set.html-CtB2TEEo.js" as="script"><link rel="prefetch" href="/assets/02_stack_queue.html-DaRBNPjl.js" as="script"><link rel="prefetch" href="/assets/03_map_hash.html-B_QBKEBj.js" as="script"><link rel="prefetch" href="/assets/04_trees_trie_graphs.html-hUeaR5EO.js" as="script"><link rel="prefetch" href="/assets/05_heap_priority_queue.html-B9BmQrUH.js" as="script"><link rel="prefetch" href="/assets/table_employees_01.html-Dnen0jUR.js" as="script"><link rel="prefetch" href="/assets/table_inventory_01.html-C3Vzwhoh.js" as="script"><link rel="prefetch" href="/assets/table_orders_01.html-CLsNMldy.js" as="script"><link rel="prefetch" href="/assets/table_orders_02.html-CIe3QH8_.js" as="script"><link rel="prefetch" href="/assets/table_products_01.html-C8AjBPg-.js" as="script"><link rel="prefetch" href="/assets/table_students_01.html-JiORkQTY.js" as="script"><link rel="prefetch" href="/assets/01_tasks.html-B6CTOh43.js" as="script"><link rel="prefetch" href="/assets/01_db_01_table_users.html-CC382ZHA.js" as="script"><link rel="prefetch" href="/assets/01_db_01_table_users_p.html-DP5E781L.js" as="script"><link rel="prefetch" href="/assets/01_db_02_table_users.html-NMBo7MlD.js" as="script"><link rel="prefetch" href="/assets/01_db_02_table_users_details.html-C013vvtR.js" as="script"><link rel="prefetch" href="/assets/01_db_03_table_orders.html-BIQefTe5.js" as="script"><link rel="prefetch" href="/assets/01_db_03_table_users.html-BkpGm0YL.js" as="script"><link rel="prefetch" href="/assets/01_db_04_table_brands.html-Ca3-zBik.js" as="script"><link rel="prefetch" href="/assets/01_db_04_table_categories.html-goWOVTvR.js" as="script"><link rel="prefetch" href="/assets/01_db_04_table_products.html-CXaLARZ-.js" as="script"><link rel="prefetch" href="/assets/01_db_05_table_roles.html-oBO3lVuv.js" as="script"><link rel="prefetch" href="/assets/01_db_05_table_users.html-j4jRpIX3.js" as="script"><link rel="prefetch" href="/assets/01_db_05_table_users_roles.html-Bs5zeqEp.js" as="script"><link rel="prefetch" href="/assets/01_db_06_table_orders.html-TECk4atj.js" as="script"><link rel="prefetch" href="/assets/01_db_06_table_orders_details.html-DfIdHwfM.js" as="script"><link rel="prefetch" href="/assets/01_db_06_table_products.html-CzIytlMN.js" as="script"><link rel="prefetch" href="/assets/02_db_01_table_products.html-CCcnTjSt.js" as="script"><link rel="prefetch" href="/assets/transactions_example_table_accounts.html-Ca4T_4FW.js" as="script"><link rel="prefetch" href="/assets/transactions_example_table_users.html-T6BNhKTs.js" as="script"><link rel="prefetch" href="/assets/transactions_example_updated_table_accounts.html-swzV8ixo.js" as="script"><link rel="prefetch" href="/assets/transactions_example_updated_table_transactions.html-DZrAYt2l.js" as="script"><link rel="prefetch" href="/assets/transactions_example_updated_table_users.html-YJdIEhxS.js" as="script"><link rel="prefetch" href="/assets/404.html-Dev79MU0.js" as="script"><link rel="prefetch" href="/assets/index.html-3J44W08r.js" as="script"><link rel="prefetch" href="/assets/index.html-BS0sk5JY.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-Bg7DJ55l.js" as="script"><link rel="prefetch" href="/assets/copy-tex.min-DHH94TGS.js" as="script"><link rel="prefetch" href="/assets/snippet-DWm-LxzY.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/images/logo.svg" alt="Кафедра ИТ"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Кафедра ИТ</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/disciplines/" aria-label="Обучение"><!--[--><!--[--><!--]--><!--]-->Обучение<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Кафедра"><span class="title">Кафедра</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Кафедра"><span class="title">Кафедра</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/about.html" aria-label="О кафедре"><!--[--><!--[--><!--]--><!--]-->О кафедре<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/curriculum.html" aria-label="Направления подготовки"><!--[--><!--[--><!--]--><!--]-->Направления подготовки<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/partners.html" aria-label="Друзья и партнеры"><!--[--><!--[--><!--]--><!--]-->Друзья и партнеры<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/structure.html" aria-label="Структура кафедры"><!--[--><!--[--><!--]--><!--]-->Структура кафедры<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/welcome.html" aria-label="Обращение к студентам"><!--[--><!--[--><!--]--><!--]-->Обращение к студентам<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://vshp.online" aria-label="Официальный сайт «ВШП»" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Официальный сайт «ВШП»<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--[--><!----><a class="repo-link nav-icon" href="https://github.com/vshp-online/it.vshp.online" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><img src="/images/icons/github-mark.svg" width="20" height="20" alt="GitHub"></a><!--]--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Поиск" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/disciplines/" aria-label="Обучение"><!--[--><!--[--><!--]--><!--]-->Обучение<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Кафедра"><span class="title">Кафедра</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Кафедра"><span class="title">Кафедра</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/about.html" aria-label="О кафедре"><!--[--><!--[--><!--]--><!--]-->О кафедре<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/curriculum.html" aria-label="Направления подготовки"><!--[--><!--[--><!--]--><!--]-->Направления подготовки<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/partners.html" aria-label="Друзья и партнеры"><!--[--><!--[--><!--]--><!--]-->Друзья и партнеры<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/structure.html" aria-label="Структура кафедры"><!--[--><!--[--><!--]--><!--]-->Структура кафедры<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/department/welcome.html" aria-label="Обращение к студентам"><!--[--><!--[--><!--]--><!--]-->Обращение к студентам<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://vshp.online" aria-label="Официальный сайт «ВШП»" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Официальный сайт «ВШП»<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">МДК.11.01 - 14 - Введение в транзакции <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="мдк-11-01-14-введение-в-транзакции" tabindex="-1"><a class="header-anchor" href="#мдк-11-01-14-введение-в-транзакции"><span>МДК.11.01 - 14 - Введение в транзакции</span></a></h1><p>Реляционные БД проектируются с учётом необходимости сохранения целостности данных. Целостность данных — это полнота, точность и единообразие данных. Для поддержания целостности данных в реляционных БД используется ряд инструментов. В их число входят первичные ключи, внешние ключи, ограничения и другие инструменты. Ограничения целостности позволяют применять практические правила к данным в таблицах и гарантировать точность и надежность данных. Большинство СУБД также поддерживает интеграцию пользовательского кода, который выполняется в ответ на определенные операции в БД.</p><p>Как правило, для поддержания целостности данных в реляционных СУБД используют механизм транзакций. Транзакция в базе данных — это одна или несколько последовательных операций на языке SQL, представляющих собой единую логическую задачу. Транзакция представляет собой неделимое действие, то есть она должна быть выполнена как единое целое и результат должен быть либо записан в базу данных целиком, либо не должен быть записан ни один из его компонентов. Каждая транзакция рассматривается как внутренне связный, надежный и независимый от других транзакций элемент.</p><blockquote><p>Транзакции — это механизм, который позволяет группировать несколько операций базы данных в одну логическую единицу работы.</p></blockquote><p>Для соблюдения целостности данных все транзакции в БД должны соответствовать требованиям <strong>ACID</strong>. Требования <strong>ACID</strong> — набор требований, которые обеспечивают сохранность данных, акроним образован по первым буквам принципов сохранности данных:</p><ol><li><p><strong>Атомарность (Atomicity)</strong>: Транзакция считается атомарной, если все ее операции выполняются либо все успешно, либо ни одна из них не выполняется. Если хотя бы одна операция транзакции не может быть выполнена, то все изменения отменяются.</p></li><li><p><strong>Согласованность (Consistency)</strong>: Транзакция должна приводить базу данных из одного согласованного состояния в другое согласованное состояние. Это означает, что все ограничения целостности должны быть соблюдены во время выполнения транзакции.</p></li><li><p><strong>Изолированность (Isolation)</strong>: Каждая транзакция должна быть выполнена изолированно от других транзакций. Это означает, что результаты одной транзакции не должны быть видны другим транзакциям до тех пор, пока первая транзакция не будет завершена.</p></li><li><p><strong>Долговечность (Durability)</strong>: Результаты успешно завершенной транзакции должны быть постоянными и доступными даже в случае сбоя системы. Это достигается путем записи изменений в постоянное хранилище, такое как жесткий диск.</p></li></ol><p>MySQL 8 обеспечивает поддержку всех этих принципов ACID для транзакций. Он предоставляет различные уровни изоляции, которые позволяют контролировать видимость изменений другим транзакциям. Кроме того, MySQL 8 включает механизмы для обработки сбоев и восстановления данных, чтобы гарантировать долговечность транзакций.</p><p>Использование транзакций в MySQL 8 позволяет обеспечить надежность и целостность данных в приложениях, особенно в ситуациях, когда несколько операций должны быть выполнены атомарно. Это делает их полезными в различных сценариях, таких как финансовые операции, онлайн-покупки или любые другие операции, требующие точности и надежности.</p><h2 id="примеры-использования-транзакции" tabindex="-1"><a class="header-anchor" href="#примеры-использования-транзакции"><span>Примеры использования транзакций</span></a></h2><p>Примеры данной темы используют учебную БД:</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true">Структура БД</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-1" aria-selected="false">Дамп</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-2" aria-selected="false">Таблицы</button></div><!--[--><div class="vp-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Структура БД</div><!--[--><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><!--]--></div><div class="vp-tab" id="v-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Дамп</div><!--[--><div class="language-sql line-numbers-mode has-collapsed-lines collapsed" data-highlighter="prismjs" data-ext="sql" style="--vp-collapsed-lines:10;"><pre><code class="language-sql"><span class="line"><span class="token keyword">SET</span> foreign_key_checks <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> users<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> accounts<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>users<span class="token punctuation">`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span> <span class="token identifier"><span class="token punctuation">`</span>users<span class="token punctuation">`</span></span> <span class="token keyword">WRITE</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>users<span class="token punctuation">`</span></span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&#39;Иванов Иван Иванович&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&#39;Петров Петр Петрович&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&#39;Сидоров Сидор Сидорович&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">UNLOCK</span> <span class="token keyword">TABLES</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>accounts<span class="token punctuation">`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>title<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>balance<span class="token punctuation">`</span></span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;0.00&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>user_id_idx<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">CONSTRAINT</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span></span>
<span class="line">    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">REFERENCES</span> <span class="token identifier"><span class="token punctuation">`</span>users<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span></span>
<span class="line">    <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span> <span class="token identifier"><span class="token punctuation">`</span>accounts<span class="token punctuation">`</span></span> <span class="token keyword">WRITE</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>accounts<span class="token punctuation">`</span></span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&#39;Основной&#39;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10500.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&#39;Резервный&#39;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3412.57</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&#39;Основной&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">20750.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&#39;Основной&#39;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">25000.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&#39;Накопительный&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5401.75</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">UNLOCK</span> <span class="token keyword">TABLES</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">SET</span> foreign_key_checks <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-tab" id="v-2" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Таблицы</div><!--[--><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-4" aria-selected="true"><strong>users</strong></button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-5" aria-selected="false"><strong>accounts</strong></button></div><!--[--><div class="vp-tab active" id="v-4" role="tabpanel" aria-expanded="true"><div class="vp-tab-title"><strong>users</strong></div><!--[--><table><thead><tr><th style="text-align:right;">id</th><th style="text-align:left;">name</th></tr></thead><tbody><tr><td style="text-align:right;">1</td><td style="text-align:left;">Иванов Иван Иванович</td></tr><tr><td style="text-align:right;">2</td><td style="text-align:left;">Петров Петр Петрович</td></tr><tr><td style="text-align:right;">3</td><td style="text-align:left;">Сидоров Сидор Сидорович</td></tr></tbody></table><!--]--></div><div class="vp-tab" id="v-5" role="tabpanel" aria-expanded="false"><div class="vp-tab-title"><strong>accounts</strong></div><!--[--><table><thead><tr><th style="text-align:right;">id</th><th style="text-align:left;">title</th><th style="text-align:right;">user_id</th><th style="text-align:right;">balance</th></tr></thead><tbody><tr><td style="text-align:right;">1</td><td style="text-align:left;">Основной</td><td style="text-align:right;">1</td><td style="text-align:right;">10500</td></tr><tr><td style="text-align:right;">2</td><td style="text-align:left;">Резервный</td><td style="text-align:right;">1</td><td style="text-align:right;">3412.57</td></tr><tr><td style="text-align:right;">3</td><td style="text-align:left;">Основной</td><td style="text-align:right;">2</td><td style="text-align:right;">20750</td></tr><tr><td style="text-align:right;">4</td><td style="text-align:left;">Основной</td><td style="text-align:right;">3</td><td style="text-align:right;">25000</td></tr><tr><td style="text-align:right;">5</td><td style="text-align:left;">Накопительный</td><td style="text-align:right;">2</td><td style="text-align:right;">5401.75</td></tr></tbody></table><!--]--></div><!--]--></div><!--]--></div><!--]--></div><h3 id="пример-без-использования-транзакции" tabindex="-1"><a class="header-anchor" href="#пример-без-использования-транзакции"><span>Пример без использования транзакций</span></a></h3><p>Пример работы в данной БД для ситуаций, когда Иванов переводит Петрову деньги с основного счета на основной:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">UPDATE</span> accounts <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">-</span> <span class="token number">10000</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">UPDATE</span> accounts <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">+</span> <span class="token number">10000</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Здесь потенциально может возникнуть проблема что в процессе выполнения запроса денег не хватит и один из запросов выполнится, а второй — нет.</p><h3 id="пример-с-использованием-транзакции" tabindex="-1"><a class="header-anchor" href="#пример-с-использованием-транзакции"><span>Пример с использованием транзакций</span></a></h3><p>Пример работы с транзакциями в данной БД для ситуаций, когда Иванов переводит Петрову деньги:</p><ol><li>Начинаем транзакцию:</li></ol><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>Получаем текущий баланс Иванова и номер его основного счета:</li></ol><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> balance <span class="token keyword">FROM</span> accounts <span class="token keyword">WHERE</span> user_id <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> title <span class="token operator">=</span> <span class="token string">&#39;Основной&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>Получаем текущий баланс Петрова и номер его основного счета:</li></ol><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> balance <span class="token keyword">FROM</span> accounts <span class="token keyword">WHERE</span> user_id <span class="token operator">=</span> <span class="token number">2</span>  <span class="token operator">AND</span> title <span class="token operator">=</span> <span class="token string">&#39;Основной&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="4"><li>Выполняем перевод средств от Иванова к Петрову с основного счета на основной:</li></ol><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">UPDATE</span> accounts <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">-</span> <span class="token number">10000</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">UPDATE</span> accounts <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">+</span> <span class="token number">10000</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>Если всё прошло по плану то фиксируем изменения:</li></ol><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">COMMIT</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Но если необходимо откатить транзакцию в случае ошибки или недостатка средств:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Примечание: В данном примере предполагается, что все операции выполняются в одном соединении с базой данных.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Последнее обновление: </span><time class="meta-item-info" datetime="2025-10-24T14:30:06.000Z" data-allow-mismatch>24.10.2025, 17:30</time></div><!----></div></footer><nav class="bottom-nav"><a href="/disciplines/mdk1101/lectures/13_lecture.html" class="nav-button prev"><div class="hint"><span class="arrow left"></span><span>Предыдущая</span></div><div class="link"><span>МДК.11.01 - 13 - Денормализация базы данных</span></div></a><a href="/disciplines/mdk1101/lectures/15_lecture.html" class="nav-button next"><div class="hint"><span>Следующая</span><span class="arrow right"></span></div><div class="link"><span>МДК.11.01 - 15 - Расширенные транзакции</span></div></a></nav><!--[--><!--[--><footer class="site-footer"><div><span>© Кафедра информационных технологий ЧУВО «ВШП», 2025. Версия: 0.18.3</span><br><span>Материалы доступны в соответствии с лицензией:</span><br><a href="/VSHP-EMLicense/LICENSE"><img src="https://flat.badgen.net/static/%D0%9B%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D1%8F/VSHP-EMLicense-1.1.0/781F18"></a></div></footer><!--]--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-TjX1P9Ye.js" defer></script>
  </body>
</html>
