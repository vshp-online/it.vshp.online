-- ===========================
-- 1. Тестирование хранимой процедуры place_order
-- ===========================

-- Пример успешного вызова: размещение заказа
CALL place_order(1, 1, 1, 1500.00);

-- Пример вызова с ошибкой: стол занят
CALL place_order(1, 1, 1, 1500.00);
-- Ожидаемый результат: ошибка "Стол уже занят"

-- Пример вызова с ошибкой: стол не найден
CALL place_order(999, 1, 1, 1500.00);
-- Ожидаемый результат: ошибка "Стол, клиент или официант не найдены"

-- Проверка результата
SELECT * FROM orders;

-- ===========================
-- 2. Тестирование пользовательской функции calculate_waiter_earnings
-- ===========================

-- Пример вызова: расчёт заработка официанта
SELECT calculate_waiter_earnings(1) AS waiter_earnings;

-- Пример вызова: официант не найден
SELECT calculate_waiter_earnings(999) AS waiter_earnings;
-- Ожидаемый результат: возвращается 0

-- ===========================
-- 3. Тестирование триггера log_table_status_update
-- ===========================

-- Пример вызова: изменение статуса стола
UPDATE tables
SET status = 'occupied'
WHERE id = 1;

-- Проверка результата: логи изменений
SELECT * FROM change_logs;

-- ===========================
-- 4. Тестирование представления waiter_orders_summary
-- ===========================

-- Пример вызова: получение данных из представления
SELECT * FROM waiter_orders_summary;
